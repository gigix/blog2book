<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>单元测试呀同志哥--透明思考</title>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache"> 
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache"> 
<META HTTP-EQUIV="Expires" CONTENT="0"> 
<META CONTENT="按需出版单元测试呀同志哥JOTM初接触  博客 博客动力 blog blogdriver blogger 中国" NAME="description"> 
<META NAME="keywords" CONTENT="透明思考 按需出版单元测试呀同志哥JOTM初接触 博客 博客动力 blog blogdriver blogger 中国"> 
<link href="diary.css" rel="stylesheet" type="text/css">
<script language="JavaScript" src="/jsp/js/UBB.js"></script>
<script type="text/javascript" src="/jsp/js/blog.js"></script>	
</head>
<body>
  <div id="container">
    <div id="header"><h1 class="title"><a href="index.html">透明思考</a></h1></div>
	<div id="category">	<a href="130161.html" title="上一篇">按需出版</a>- -|
		<a href="index.html">回首页</a> | <a href="catalog_2004.html">2004年索引</a>
	| - -<a href="130736.html" title="下一篇">JOTM初接触</a></div>
 <div class="entity">
			    <h2 class="diaryTitle">单元测试呀同志哥- -</h2> 
				 <p/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				 <p><DIV>Potian：不写单元测试就等于慢性自杀</DIV>
<DIV><A href="http://www.aspectoriented.org:9080//space/2004-04-26#老得不能再老的老话题" target=_blank>http://www.aspectoriented.org:9080//space/2004-04-26#老得不能再老的老话题</A></DIV>
<DIV>&nbsp;</DIV>
<DIV>我记得有几位高手曾经跟我炫耀自己在Solaris或者别的什么古怪环境下用GDB或者别的什么古怪东西调试程序。我没这么厉害，我也没这个嗜好，我只要做最简单最平实的事情，就是写好单元测试。我没有天才的调试能力和丰富的调试经验，单元测试帮助我做这些麻烦的事，让我甘心做个快乐的傻瓜。</DIV>
<DIV>&nbsp;</DIV>
<DIV><FONT color=#ff3333>Potian：对可可的回复的回复</FONT></DIV>
<DIV><A href="http://www.aspectoriented.org:9080//space/2004-04-26#单元测试是新技术？没有测试号称健壮？" target=_blank><FONT color=#ff3333>http://www.aspectoriented.org:9080//space/2004-04-26#单元测试是新技术？没有测试号称健壮？</FONT></A></DIV></p>				  
             <p class="diaryFoot">- 作者： <a href="javascript:void(0);" onClick="window.open('/control/postMessage.b?receiverName=gigix&receiver=25249','发送短消息','width=310,height=265')" title="gigix">gigix</a>  2004年04月26日, 星期一 16:07  </p>
				</div>
 <div class="operation"> 
    <a name="trackback"><H3>Trackback</H3></a>
      <p class="trackback">你可以使用这个链接引用该篇日志 http://publishblog.blogdriver.com/blog/tb.b?diaryID=130680
 </p>
 </div>				
<div class="operation">
     <a name="comment"><H3>回复</H3></a>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：可可 </H4></a> 
    <H5>Fri Apr 30 09:56:35 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">to&nbsp;charon：很高兴还有人认同我这种“非主流”的想法。抱歉我还没有blog，一个原因是平时比较忙；一个原因是网上很多人都肝火太盛，而我是个不喜欢争辩的人；一个原因是网上太多talent，我自知没有天赋，就不出来丢人现眼了。其实，最主要的原因还是我这人比较懒，<img src=/jsp/images/emot/em44.gif border=0 align=middle><br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：ozzzzzz </H4></a> 
    <H5>Wed Apr 28 02:51:19 CST 2004　 
        <a href="mailto:ozzzzzz@163.com"><img src="http://www.blogdriver.com/template/common/img/letter.gif" width="16" height="12" border="0" align="absmiddle" class="imgStyle" alt="作者邮箱"></a>　
        </H5> 
    <BR/>
    <P class="comment">charon<br>TDD的核心思想在于每作一件事情以前，先要明确你如何验证你究竟是否按照你的想法做了那件事。测试是一件专门的技术，但是白盒测试特别是单元测试应该由程序员进行而不是测试人员进行。在我们的实际操作中单元测试经常会变更，这只是因为你要作更多更新的事情，所以你必须建立新的验证。<br>没有任何的方法可以保证你不犯错误，TDD只是保证你可以不犯你想到的错误。仅此而已。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：charon </H4></a> 
    <H5>Tue Apr 27 22:49:11 CST 2004　 
        <a href="mailto:wangyc@nbjyc.com.cn"><img src="http://www.blogdriver.com/template/common/img/letter.gif" width="16" height="12" border="0" align="absmiddle" class="imgStyle" alt="作者邮箱"></a>　
        </H5> 
    <BR/>
    <P class="comment">回ozzzzzzz,单元测试是在制定标准？哪一个标准？根据TDD的做法，单元测试实际上是经常在变动的，你看到过这么频繁变动的标准吗？<br>  在我的眼里，unittest的最多的功用是同样的错误不犯两次。至于其它的东西，或者TDD,把test当作系统构架的引擎，首先至少得给出证明来解释TDD构架出的系统的自然性，否则也只是痴人说梦而已。<br>  我曾经在那本"敏捷软件开发"的保龄球那个例子中找出一个逻辑错误(贴在china-pub了)，那个东西是TDD的结果。之后再也没有兴趣仔细去看这本书中的其他代码。我不知道TDD和unittest除了前面说的那点之外能够保证什么。<br>  我想我们这里没几个人有时间和精力去学习过真正的单元测试的技术(我也没有，所以比较谦虚)，我也相信没有几个人能够写出合格的单元测试(说句实话，我们写的单元测试，充其量相当于非计算机专业的人刚转行入计算机时写的程序，测试是一个很专业的技术，真的)。最多只是一个形式上的让自己心安的东西，但是你真的能够心安吗？<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：charon </H4></a> 
    <H5>Tue Apr 27 22:38:39 CST 2004　 
        <a href="mailto:wangyc@nbjyc.com.cn"><img src="http://www.blogdriver.com/template/common/img/letter.gif" width="16" height="12" border="0" align="absmiddle" class="imgStyle" alt="作者邮箱"></a>　
        </H5> 
    <BR/>
    <P class="comment">可可兄弟，非常赞同你的观点。你有没有blog啊，也让我好好仰慕一下。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：thatway </H4></a> 
    <H5>Tue Apr 27 21:54:11 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">感谢几位前辈的高论，又长知识了。幸好potain不是一开始就觉得无聊，要不这些文字就无缘得见了 :)<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：ozzzzzz </H4></a> 
    <H5>Tue Apr 27 15:11:47 CST 2004　 
        <a href="mailto:ozzzzzz@163.com"><img src="http://www.blogdriver.com/template/common/img/letter.gif" width="16" height="12" border="0" align="absmiddle" class="imgStyle" alt="作者邮箱"></a>　
        </H5> 
    <BR/>
    <P class="comment">嘿嘿。知道就好。<br>你偏偏要给那些不承认1＋1＝2的人讲圆周率的计算方法，能不无聊吗。他们认为单元测试就是寻找问题，和我们认为单元测试是制订标准根本就不是一个语言系统。对外国人讲唐诗，难啊！<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Tue Apr 27 15:00:45 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">就当我讲也没什么,我现在觉得自己特别无聊<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：ozzzzzz </H4></a> 
    <H5>Tue Apr 27 10:16:25 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">上面是我说给potian 。结果不慎写成potian 说的了。好好，这也是笑料。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Tue Apr 27 10:15:00 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">这次你就别再说话了。人家说它研究过上万美刀的测试软件，又同意了你测试出现在1966年，这就行了。我们自己会家偷偷的笑，还不行吗？<br>别吵了。别抬了。不是所有的人都值得我们花费心思去教育的。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：可可 </H4></a> 
    <H5>Tue Apr 27 09:42:26 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">不知道怎么对“对可可的回复的回复”进行回复，所以还是发到这里。<br>1）我并不是轻视测试，相反我一直认为测试是软件开发重要的、不可或缺的一部分。简单的以时间衡量，我从事的软件开发测试占了40%-50%的时间。另外，我可以跟您证明，软件测试技术确实早于UNIX，软件测试技术的发源一般以1968年北约的一次会议为标志，UNIX的我刚才查了一下是1969。<br>2）单元测试阶段的测试效果最佳，但这可以通过完善的设计、个人对技术的深刻理解和经验、编程阶段的细心来弥补。此时依赖于测试是一种错误的做法。此外，单元测试的大规模普及和XUnit没有什么关系，中国的情况或许是这样并不代表全世界都是这样，您经历了这样的情况，并不代表所有人都和您是一样的经历，希望您不要犯这种错误。<br>3）功能测试和系统测试阶段（原谅我又用了在“最新软件工程理论所不屑的V字模型”）测试的效果递减，此时发现的问题的致命程度递增。尽管测试发现的问题价值在上升，但这又从另一方面反映了系统的设计缺陷，这个时候看来，是花大的精力在前期的设计上呢，还是在后期的测试上好，显而易见。<br>4）测试和回归造成的矛盾更加难以解决，我想很多人曾经苦于这一点，我更是。<br>5）测试可以解决软件开发过程中的很多问题，最主要在于弥补人作为主体时无法避免的考虑不周和粗心大意,做个不大合适的比喻：它应该是“补丁”而不应该是“引擎”。测试的最大功用其实如gigix所说，“用10分钟写一个测试，或者用两小时debug”。但仍有很多问题它无法解决，它无法提高你的程序的质量，有很多领的软件开发测试不适合或者没有办法介入。<br>6）基于以上考虑，我认为不能把测试的功用无限提升，更不能把它作为开发过程的“救火队员”。它只能居于次位，决不能越俎代庖。<br>7）据说目前国内软件开发的现状是不重视测试，因此有必要宣传测试的重要性，介绍流行的测试方法。但这并不意味着我们可以过分强调它，更不应该全盘接受。辨证的、客观的予以评估，并在适当的、可行的系统中引入，而非全面扩展到所有系统、所有阶段。<br>8）任何方法都是为了解决问题或者更好的解决问题，而不是为了替代“旧方法”。天下没有包治百病的测试方法，那些热门理论有它适用的地方，但仍有它不适用的地方。同样的方法“测试先行”，你potian的项目很合适，我可可的项目就未必可用，也可能没有必要用。估计你那里测试实施的效果很好，要不然你不会如此激动，写这么老长的东西误解我的意思，害的我也写这么老长的东西。<br>9）可用性＝MTBF/(MTBF+MTTR)，至于它是怎么算的，我建议你去网上查查。<br>10）从感情上讲，我应该对测试更加热衷，我花了大约三年时间专门研究单元测试和可靠性的一些东西，接触过多种价值XX万美元的测试软件，并不是象potian您说的“更看不上其他人鼓吹的更高级的工具”，做过专门的测试工程师。虽然我现在不再从事这方面的研究，但我仍保持着这方面的兴趣。但我发现所谓的“从感情上讲”很容易有相当的偏颇，也很容易使大牛为偏执狂，譬如banq和robbin的论战、gigix的多次论战。幸好我还不是牛，只是一粒小小的可可果，但我还是害怕自己不再客观和平和，所以我把它放在最后。<br> <br>题外话，老大们怎么这么有时间写这么长的东东？我是第一次，也是最后一次。<br>再加一句，wintereagle兄这样的人和他所从事的这样的领域是我的偶像和目标，可惜我的基础太差，:(<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Tue Apr 27 01:35:11 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">不抬了。累死了<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：ozzzzzz </H4></a> 
    <H5>Tue Apr 27 00:42:12 CST 2004　 
        <a href="mailto:ozzzzzz@163.com"><img src="http://www.blogdriver.com/template/common/img/letter.gif" width="16" height="12" border="0" align="absmiddle" class="imgStyle" alt="作者邮箱"></a>　
        </H5> 
    <BR/>
    <P class="comment">看来potian也是一个喜欢抬杠的人：）应该看看我的不要抬杠。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Mon Apr 26 23:24:22 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">并且事实上，绝大多数服务器程序中，真正完全处理线程同步、读写socket等直接和物理资源打交道的代码在系统占的比例少之有少<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Mon Apr 26 23:18:12 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">系统的绝大多数部分都可以用Unittest，其它的压力、性能、功能、可靠性本来就不是单元测试的范畴<br><br>但如果你这个多线程的程序，单线程里面的逻辑都统不过，那就什么也不要做了<br><br>如果一个通信协议连协议本身的单元测试都通不过，那就不要在socket上等了<br><br>更何况很多实际的情况可以Mock环境测出来呢<br><br>再复杂的情况都可以、应该首先保证每一单元子部件的正确性。单元都通不过，其他就别谈了。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Mon Apr 26 23:07:15 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">Jetty:<br>http://prdownloads.sourceforge.net/jetty/jetty-4.2.20RC0-src.tar.gz?download<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：potian </H4></a> 
    <H5>Mon Apr 26 23:03:17 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">前面这位兄弟是开玩笑吧<br>即使多线程网络通信的程序不能测试的也是少部分，举个大家看得到的例子：<br>http://www.thecortex.net/clover/eg/jboss/<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：wintereagle </H4></a> 
    <H5>Mon Apr 26 21:26:56 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">多线程网络通信的程序，unitest很难起到效果。因为第一，多线程程序需要保证若干个有穷自动机跳转的正确，这就需要一个step by step的white box的测试，而不是unitest那样的blackbox测试。<br>第二多线程网络通信的程序，很多时候是需要一个概率统计的结果。比如某个应用对Socket采用了LRU的淘汰算法，那么这个LRU算法是否有问题，就需要长时间的采集数据,进行分析<br>第三线程，进程之间的通信。也难以采用unitest进行解决。<br><br>第四，多线程程序更加需要关注的稳定性和效率问题。很多bug是需要在自动机中跳转若干次有的时候是运行几个月<br>才会出现问题。例如内存溢出，tcp堆栈溢出这样的问题。<br><br><br>当然多线程网络通信的问题中可以分解出一些相对独立的<br>模块，例如数据库读写，文件日志的读写。这些问题是可以用unitest 进行解决的。但是毕竟这些东西仅仅是占一小部分。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：雷斯林的手杖 </H4></a> 
    <H5>Mon Apr 26 21:11:04 CST 2004　 
        <a href="mailto:bluemiles@263.net"><img src="http://www.blogdriver.com/template/common/img/letter.gif" width="16" height="12" border="0" align="absmiddle" class="imgStyle" alt="作者邮箱"></a>　
            <a href="http://miles.blogdriver.com" target="_blank"><img src="http://www.blogdriver.com/template/common/img/blog_2.gif" width="16" height="14" border="0" align="texttop"  class="imgStyle" alt="作者Blog"></a>
	</H5> 
    <BR/>
    <P class="comment">传统的调试方法对于分布式的大规模应用可能是力有不逮吧。况且运行环境和开发环境的配置往往差很多，难道有人会指望把运行环境的异常在测试或者开发环境复现？欧私下觉得很不现实。<br>我平时也用vi+make+gcc+gdb开发，不觉得有什么大不了的，个人生活态度的体现罢了。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：冰云 </H4></a> 
    <H5>Mon Apr 26 20:25:51 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">> 60、70号工程师，绝大部分在用vi或者ultraedit、editplus<br><br>难以理解。有了自动化IDE，为什么还要用vi？ 难道节省时间，提示错误，自动完成还不够吸引人么？<br><br>或者，是太顽固，难以接受新鲜事物。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：透明 </H4></a> 
    <H5>Mon Apr 26 20:20:30 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">用10分钟写一个测试，或者用两小时debug，你可以自己选择。这不是什么技术，是你可以选择的生活方式。你喜欢浪费自己的时间，谁都管不着你。<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：可可 </H4></a> 
    <H5>Mon Apr 26 18:44:59 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">我们公司60、70号工程师，绝大部分在用vi或者ultraedit、editplus，更没有什么先进的测试工具或者测试方法，一样解决及其复杂的分布式系统的问题，写出及其健壮的代码（系统可用性>99.99%）。我自己置身其中，也没觉得XP之类的东西有多大必要，所以有时我也很奇怪，网上吵的热热闹闹的“测试先行”、“UNIT”究竟有多大必要？或者说它真的能够提高系统的质量、减少系统开发的时间？这些理论真的是解决现实问题的灵丹妙药吗？<br>还有，现在充斥着各种各样的新技术和各种各样鼓吹这些技术、或者很喜欢诋毁自己不喜欢的技术的人，我也很纳闷，为什么那些“旧”技术就不好而这些新技术就一定好呢？难道我们不更应该关注的是问题而非技术吗？<br>
      <br>
    </P>
     <a name="comment$(remark.remarkID)"><H4> - 评论人：ozzzzzz </H4></a> 
    <H5>Mon Apr 26 16:46:36 CST 2004　 
        </H5> 
    <BR/>
    <P class="comment">多些短小的单元测试，就少些悠长的调试。<br>怎么这些人就是不开窍呢？<br>
      <br>
    </P>
 </div>
  <div class="operation"> 
    <table width="700" border="0" cellpadding="0" cellspacing="0" class="comment">
      <form id="replyForm" method="POST">
        <input type="hidden" name="blogID" value="18254">
        <input type="hidden" name="diaryID" value="130680">
        <input type="hidden" name="blogDomino" value="gigix">
<script>
if(getCookie('userID') == null){        
document.write('<tr><td width="70">发布人：</td>');
document.write('<td width="150"> <input name="remark.authorNameFUI" type="text" size="20" class="inputStyle" maxlength="20"></td>');
document.write('<td width="70">邮箱：</td>');
document.write('<td width="435"> <input name="remark.authorEmail" type="text" size="20" class="inputStyle" maxlength="40"></td>');
document.write('</tr><tr><td>主　页：</td>');
document.write('<td colspan="3"> <input name="remark.authorURL" type="text" class="inputStyle" value="HTTP://" size="63" maxlength="40"></td></tr>');
}else{
document.write('<input type="hidden" name="remark.authorNameFUI" value="Blogdriver">');
}
</script>        
        <tr align="left"> 
          <td colspan="4">评论内容：<br/> <textarea name="remark.remarkFUI" id="remark" cols="60" rows="8" class="textStyle" >
          </textarea> 
          </td> 
        </tr>
        <tr align="left"> 
          <td colspan="4"> 　　　　　　 　　　　　　 
            <input type="button" value="提交" onClick="reply()" >
            　 
            <input type="reset" value="重置" > </td>
        </tr>
      </form>
    </table>
  </div>
</div>	
<script type="text/javascript" src="http://gigix.blogdriver/gigix/extend3.js"></script> 
<div id="footer"><a href="http://www.blogdriver.com/jsp/reg/register.jsp"><img class="logo" src="http://www.blogdriver.com/template/common/img/logo3.gif" border="0"></a><a href="http://www.blogdriver.com/">2003-2004 BLOGDRIVER.COM All rights reserved</a></div>
</body>
</html>
